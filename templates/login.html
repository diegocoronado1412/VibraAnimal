{% extends "layout.html" %}

{% block title %}Autenticación - Veterinaria Vibra Animal{% endblock %}

{% block content %}
<div class="auth-container">
  <h2>Bienvenido</h2>
  <div class="auth-tabs">
    <button onclick="showTab('login')" id="tab-login">Iniciar Sesión</button>
    <button onclick="showTab('register')" id="tab-register">Registrarse</button>
  </div>
  
  <div id="login" class="auth-tab">
    <h3>Iniciar Sesión</h3>
    <form action="{{ url_for('login_unificado') }}" method="POST">
      <input type="hidden" name="form_type" value="login">
      <label for="cedula">Cédula:</label>
      <input type="text" id="cedula" name="cedula" required>
      
      <label for="password">Contraseña:</label>
      <input type="password" id="password" name="password" required>
      
      <input type="submit" value="Ingresar">
    </form>
  </div>
  
  <div id="register" class="auth-tab">
    <h3>Registrarse</h3>
    <form action="{{ url_for('login_unificado') }}" method="POST">
      <input type="hidden" name="form_type" value="register">
      <label for="cedula_reg">Cédula:</label>
      <input type="text" id="cedula_reg" name="cedula_reg" required>
      
      <label for="nombre_reg">Nombre:</label>
      <input type="text" id="nombre_reg" name="nombre_reg" required>
      
      <label for="correo_reg">Correo:</label>
      <input type="email" id="correo_reg" name="correo_reg" required>
      
      <label for="telefono_reg">Teléfono:</label>
      <input type="text" id="telefono_reg" name="telefono_reg" required>
      
      <label for="password_reg">Contraseña:</label>
      <input type="password" id="password_reg" name="password_reg" required>
      
      <label for="rol_reg">Rol:</label>
      <select id="rol_reg" name="rol_reg" required>
        <option value="dueno">Dueño</option>
        <option value="veterinario">Veterinario</option>
        <option value="admin">Administrador</option>
      </select>
      
      <input type="submit" value="Registrarse">
    </form>
  </div>
</div>

<script>
  function showTab(tabId) {
    // Ocultar todas las pestañas
    var tabs = document.querySelectorAll('.auth-tab');
    tabs.forEach(function(tab) {
      tab.classList.remove('active');
    });
    // Mostrar la pestaña seleccionada
    document.getElementById(tabId).classList.add('active');
    
    // Actualizar apariencia de los botones
    var buttons = document.querySelectorAll('.auth-tabs button');
    buttons.forEach(function(btn) {
      btn.classList.remove('active');
    });
    document.getElementById('tab-' + tabId).classList.add('active');
  }
  
  // Al cargar la página, mostrar la pestaña de login por defecto
  window.addEventListener('DOMContentLoaded', function(){
      showTab('login');
  });
</script>
{% endblock %}
